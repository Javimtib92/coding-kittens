---
import { getCollection } from 'astro:content';
import RootLayout from '../../../layouts/RootLayout.astro';

export async function getStaticPaths() {
  const categories: string[] = [];
  const posts = await getCollection('blog', ({ data }) => {
    return import.meta.env.PROD ? data.draft !== true : true;
  });

  for (const post of posts) {
    const category = post.id.split('/')[0];

    if (!categories.includes(category)) {
      categories.push(category);
    }
  }
  return categories.map((category) => ({
    params: { category },
    props: category,
  }));
}
---

<RootLayout> something </RootLayout>
